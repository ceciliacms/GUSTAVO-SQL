DROP DATABASE CINEMA;
CREATE SCHEMA IF NOT EXISTS CINEMA;
USE CINEMA; 



CREATE TABLE IF NOT EXISTS SALAS(
ID_SALAS INT ,
NOME VARCHAR(45) NOT NULL,
CAPACIDADE INT NOT NULL,
PRIMARY KEY(ID_SALAS)
);
CREATE TABLE IF NOT EXISTS FILMES(
ID_FILMES INT,
NOME VARCHAR(45)NOT NULL,
DISRIBUIDORA VARCHAR(45)NOT NULL,
TEMPO INT NOT NULL, 
DIRETOR VARCHAR(45) NOT NULL,
PRIMARY KEY(ID_FILMES)
);
CREATE TABLE IF NOT EXISTS ESPECTADORES(
COD_ESPECTADOR INT ,
TELEFONE VARCHAR(20) NOT NULL,
EMAIL VARCHAR(30),
NOME VARCHAR(100),
DATA_NASC DATE NOT NULL,
PRIMARY KEY(COD_ESPECTADOR)
);
CREATE TABLE IF NOT EXISTS INGRESSOS(
ID_INGRESSOS INT,
COD_ESPECTADOR INT NOT NULL,
HORA TIME NOT NULL,
DATE DATE NOT NULL,
PRIMARY KEY(ID_INGRESSOS,COD_ESPECTADOR),
CONSTRAINT COD_ESPECTADOR FOREIGN KEY (COD_ESPECTADOR) REFERENCES ESPECTADORES(COD_ESPECTADOR)
);

CREATE TABLE IF NOT EXISTS SESSOES(
ID_SESSOES INT,
ID_FILMES INT NOT NULL,
ID_SALAS INT (20) NOT NULL,
ID_INGRESSOS INT NOT NULL,
COD_ESPECTADOR INT NOT NULL,
PRIMARY KEY (ID_SESSOES,ID_FILMES,ID_SALAS,ID_INGRESSOS,COD_ESPECTADOR),
CONSTRAINT ID_FILMES FOREIGN KEY (ID_FILMES) REFERENCES FILMES (ID_FILMES),
CONSTRAINT ID_SALAS FOREIGN KEY (ID_SALAS) REFERENCES SALAS (ID_SALAS),
CONSTRAINT ID_INGRESSOS FOREIGN KEY (ID_INGRESSOS) REFERENCES INGRESSOS (ID_INGRESSOS),
CONSTRAINT COD_ESPECTADOR2 FOREIGN KEY (COD_ESPECTADOR ) REFERENCES INGRESSOS(COD_ESPECTADOR )
);





